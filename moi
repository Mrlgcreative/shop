Pas de souci ! R√©visons et corrigeons le script de suppression pour nous assurer qu'il fonctionne correctement. Nous allons v√©rifier chaque √©tape pour nous assurer que l'article est bien supprim√© et que l'historique est mis √† jour.

V√©rification du Script de Suppression

*supprimer.php*

Assurons-nous que le script de suppression v√©rifie correctement l'existence de l'article, supprime l'article et enregistre l'action dans l'historique.

php
<?php
include 'config.php';

$id = $_GET['id'];
$article_result = $conn->query("SELECT * FROM Articles WHERE id=$id");

if ($article_result->num_rows > 0) {
    $article = $article_result->fetch_assoc();
    $prix = $article['prix'];

    $sql = "DELETE FROM Articles WHERE id=$id";
    if ($conn->query($sql) === TRUE) {
        // Ajouter l'entr√©e dans l'historique
        $action = 'Suppression';
        $quantit√© = 0; // Quantit√© supprim√©e
        $stmt_hist = $conn->prepare("INSERT INTO Historique (id_article, action, quantit√©, prix) VALUES (?, ?, ?, ?)");
        $stmt_hist->bind_param("isid", $id, $action, $quantit√©, $prix);
        $stmt_hist->execute();
        $stmt_hist->close();

        echo "Article supprim√© avec succ√®s";
    } else {
        echo "Erreur : " . $conn->error;
    }
} else {
    echo "Erreur : Article non trouv√©.";
}

$conn->close();
header("Location: index.php");
exit();
?>


Points √† V√©rifier

1. URL de Suppression : Assure-toi que l'URL de suppression inclut correctement l'ID de l'article √† supprimer, par exemple supprimer.php?id=1.

2. Permissions de la Base de Donn√©es : V√©rifie que l'utilisateur de la base de donn√©es a les permissions n√©cessaires pour effectuer des op√©rations de suppression.

3. Connexion √† la Base de Donn√©es : Assure-toi que la connexion √† la base de donn√©es est correctement √©tablie dans config.php.

Exemple d'Utilisation

Pour supprimer un article, l'URL doit ressembler √† ceci : http://localhost/shop/supprimer.php?id=1

En suivant ces √©tapes, le script de suppression devrait fonctionner correctement et enregistrer l'action dans l'historique. Si tu rencontres toujours des probl√®mes, fais-le moi savoir et nous examinerons plus en d√©tail ce qui pourrait ne pas¬†fonctionner.¬†üòä
